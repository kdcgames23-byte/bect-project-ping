<!doctypehtml><html lang=fr><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>BECT - Accueil</title><link href=style.css rel=stylesheet><style>#search-results{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:30px;padding:20px}.result-item{background:#1e1e1e;color:#f0f0f0;padding:0;border-radius:12px;overflow:hidden;box-shadow:0 8px 15px rgba(0,0,0,.5);transition:transform .2s ease,box-shadow .2s ease}.result-item:hover{transform:translateY(-5px);box-shadow:0 12px 20px rgba(0,0,0,.7)}.level-content{padding:15px;display:flex;flex-direction:column;gap:10px}.level-content h3{color:#00d0ff;margin:0;font-size:1.2em;cursor:pointer}.level-content p{margin:0;font-size:.9em;color:#b0b0b0}.creator-name{font-weight:700;color:#4caf50!important;cursor:pointer}.slideshow{width:100%;height:200px;overflow:hidden;position:relative}.slideshow img{width:100%;height:200px;object-fit:cover;position:absolute;opacity:0;transition:opacity .8s ease-in-out}.slideshow img.active{opacity:1}.download-btn{background:#0078ff;color:#fff;border:none;padding:10px 15px;border-radius:6px;cursor:pointer;font-weight:700;letter-spacing:.5px;transition:background .2s ease;margin-top:5px}.download-btn:hover{background:#0059c9}#filter-bar{display:flex;justify-content:flex-end;padding:10px 20px;background:#2a2a2a;border-radius:8px;margin-bottom:20px;align-items:center;gap:10px}#sort-filter{padding:8px;border-radius:6px;border:1px solid #444;background:#333;color:#fff}</style><header><div id=user-info><span id=username-display></span><button id=btn-settings>Param√®tres</button><button id=btn-logout>D√©connexion</button></div><div><button id=btn-login>Connexion</button><button id=btn-register>Inscription</button><button id=btn-publish>Publier</button><button id=btn-admin>Admin</button></div><div><input id=search-input placeholder="Rechercher un niveau..."><button id=btn-search>üîç</button></div></header><main><div id=filter-bar><label for=sort-filter>Trier par :</label> <select id=sort-filter><option value=recent>Publi√© r√©cemment<option value=ancient>Publi√© anciennement<option value=downloads_desc>Le plus t√©l√©charg√©<option value=downloads_asc>Le moins t√©l√©charg√©</select></div><div id=search-results></div></main><script type=module src=script.js></script><script type=module>import{API_URL}from"./script.js";let allLevels=[];const sortFilter=document.getElementById("sort-filter");async function loadLevels(e="",t="recent"){const n=document.getElementById("search-results");n.innerHTML="<p>Chargement des niveaux...</p>";const r=`${API_URL}/levels?sort=${t}`;try{const e=await fetch(r),t=await e.json();if(!t.success)return void(n.innerHTML="<p>Erreur lors du chargement des donn√©es.</p>");allLevels=t.levels}catch(e){return console.error(e),void(n.innerHTML="<p>Erreur serveur ou de connexion.</p>")}if(0===allLevels.length)return void(n.innerHTML="<p>Aucun niveau publi√©</p>");const l=e.toLowerCase().trim(),a=allLevels.filter((e=>{if(!l)return!0;const t=e.title.toLowerCase().includes(l),n=e.creator.toLowerCase().includes(l);return t||n}));n.innerHTML="",0===a.length&&l?n.innerHTML=`<p>Aucun r√©sultat trouv√© pour "${e}".</p>`:a.forEach((e=>{const t=document.createElement("div");t.classList.add("result-item");const r=document.createElement("div");if(r.classList.add("slideshow"),e.images&&e.images.length>0&&(e.images.forEach(((e,t)=>{const n=document.createElement("img");n.src=e,0===t&&n.classList.add("active"),r.appendChild(n)})),e.images.length>1)){let e=0;setInterval((()=>{const t=r.querySelectorAll("img");t[e].classList.remove("active"),e=(e+1)%t.length,t[e].classList.add("active")}),3e3)}t.appendChild(r);const l=document.createElement("div");l.classList.add("level-content");const a=document.createElement("h3");a.textContent=e.title,a.addEventListener("click",(()=>{window.location.href=`niveau.html?id=${encodeURIComponent(e._id)}`}));const c=document.createElement("p");c.innerHTML=`Cr√©√© par : <span class="creator-name">${e.creator}</span>`,c.querySelector(".creator-name").addEventListener("click",(()=>{window.location.href=`utilisateur.html?username=${encodeURIComponent(e.creator)}`}));const o=document.createElement("p");if(e.createdAt){const t={year:"numeric",month:"short",day:"numeric"};o.textContent=`Publi√© le : ${new Date(e.createdAt).toLocaleDateString("fr-FR",t)}`}else o.textContent="Publi√© le : Inconnu";o.style.fontSize=".85em",o.style.color="#777";const s=document.createElement("p");s.textContent=`T√©l√©chargements : ${e.downloads||0}`,s.style.color="#ff9800";const i=document.createElement("p");i.textContent=e.description||"Aucune description.";const d=document.createElement("button");d.textContent="T√©l√©charger",d.classList.add("download-btn"),d.addEventListener("click",(async()=>{window.location.href=`niveau.html?id=${encodeURIComponent(e._id)}`})),l.appendChild(a),l.appendChild(c),l.appendChild(o),l.appendChild(s),l.appendChild(i),l.appendChild(d),t.appendChild(l),n.appendChild(t)}))}sortFilter.addEventListener("change",(()=>{loadLevels(document.getElementById("search-input").value,sortFilter.value)}));const searchInput=document.getElementById("search-input"),btnSearch=document.getElementById("btn-search");btnSearch&&btnSearch.addEventListener("click",(()=>{loadLevels(searchInput.value,sortFilter.value)})),searchInput&&searchInput.addEventListener("keypress",(e=>{"Enter"===e.key&&loadLevels(searchInput.value,sortFilter.value)}));const initialSort=sortFilter.value||"recent";loadLevels(searchInput.value,initialSort)</script>