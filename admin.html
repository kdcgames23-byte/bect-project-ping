<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><title>BECT Admin Panel</title><link rel="stylesheet" href="style.css"><style> body { background: #121212; color: white; font-family: sans-serif; padding: 20px; } .admin-container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; } .box { background: #1e1e1e; padding: 20px; border-radius: 8px; border: 1px solid #333; } .list-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #333; background: #252525; margin-bottom: 5px; border-radius: 4px; } .btn-del { background: #f44336; color: white; border: none; padding: 6px 12px; cursor: pointer; border-radius: 4px; } .btn-del:hover { background: #d32f2f; } .search-bar { width: 100%; padding: 10px; margin-bottom: 15px; background: #333; border: none; color: white; border-radius: 4px; } h2 { color: #ffa500; border-bottom: 2px solid #ffa500; padding-bottom: 5px; } a { color: #ccc; text-decoration: none; } a:hover { color: white; } </style></head><body><h1 style="text-align:center;">PANNEAU ADMINISTRATEUR</h1><p style="text-align:center;"><a href="index.html">â¬… Retour Ã  l'accueil</a></p><div class="admin-container"><div class="box"><h2>Utilisateurs</h2><input type="text" id="search-users" class="search-bar" placeholder="ðŸ” Chercher un utilisateur..."><div id="users-list">Chargement...</div></div><div class="box"><h2>Niveaux</h2><input type="text" id="search-levels" class="search-bar" placeholder="ðŸ” Chercher un niveau..."><div id="levels-list">Chargement...</div></div></div><script type="module">import { API_URL, user } from "./script.js";if (!user || user.role !== "admin"){ alert("AccÃ¨s refusÃ©. Connectez-vous en tant qu'admin."); window.location.href = "index.html";}let allUsers = [];let allLevels = [];async function loadData(){ try { const resU = await fetch(`${API_URL}/admin/users`, { headers:{ Authorization:`Bearer ${user.token}` } }); const dataU = await resU.json(); if(dataU.success) { allUsers = dataU.users; renderUsers(allUsers); } const resL = await fetch(`${API_URL}/admin/levels`, { headers:{ Authorization:`Bearer ${user.token}` } }); const dataL = await resL.json(); if(dataL.success) { allLevels = dataL.levels; renderLevels(allLevels); } } catch(e) { console.error(e); alert("Erreur chargement donnÃ©es."); }}function renderUsers(list){ const container = document.getElementById("users-list"); container.innerHTML = ""; list.forEach(u => { const div = document.createElement("div"); div.className = "list-item"; div.innerHTML = `<span>${u.username} <small>(${u.role})</small></span>`; const btn = document.createElement("button"); btn.className = "btn-del"; btn.textContent = "Supprimer"; btn.onclick = () => deleteUser(u.username); div.appendChild(btn); container.appendChild(div); });}function renderLevels(list){ const container = document.getElementById("levels-list"); container.innerHTML = ""; list.forEach(lvl => { const div = document.createElement("div"); div.className = "list-item"; div.innerHTML = ` <div><strong style="color:#00d0ff">${lvl.title}</strong><br><small>par ${lvl.creator}</small></div>`; const btn = document.createElement("button"); btn.className = "btn-del"; btn.textContent = "X"; btn.onclick = () => deleteLevel(lvl._id); div.appendChild(btn); container.appendChild(div); });}async function deleteUser(username){ if(!confirm(`âš ï¸ DANGER !\nSupprimer "${username}" effacera aussi TOUS ses niveaux et images.\nContinuer ?`)) return; try { const res = await fetch(`${API_URL}/admin/users/${username}`, { method: "DELETE", headers:{ Authorization:`Bearer ${user.token}` } }); if((await res.json()).success) { alert("Utilisateur supprimÃ©."); loadData(); } } catch(e) { alert("Erreur serveur"); }}async function deleteLevel(id){ if(!confirm("Supprimer ce niveau dÃ©finitivement ?")) return; try { const res = await fetch(`${API_URL}/levels/${id}`, { method: "DELETE", headers:{ Authorization:`Bearer ${user.token}` } }); if((await res.json()).success) { loadData(); } } catch(e) { alert("Erreur serveur"); }}document.getElementById("search-users").addEventListener("input", (e) => { const val = e.target.value.toLowerCase(); renderUsers(allUsers.filter(u => u.username.toLowerCase().includes(val)));});document.getElementById("search-levels").addEventListener("input", (e) => { const val = e.target.value.toLowerCase(); renderLevels(allLevels.filter(l => l.title.toLowerCase().includes(val) || l.creator.toLowerCase().includes(val) ));});loadData();</script></body></html>